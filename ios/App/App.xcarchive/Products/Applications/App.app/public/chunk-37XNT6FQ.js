import{a as V}from"./chunk-TZ5JFCR4.js";import{a as j,b as F}from"./chunk-N3GHST2A.js";import{A as k,B as S,J as E,Q as T,d as x,e as m,f as z,g as b,h as r,i as I,j as u,k as l,l as a,m as c,n as g,o as v,p as P,q as w,r as _,s,u as f,v as C,w as O,y as M,z as y}from"./chunk-EEDFN62T.js";import"./chunk-T5MLWCSA.js";import"./chunk-R4C5SHYA.js";import"./chunk-FVEUHJIJ.js";import"./chunk-XBS7SVZ7.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-A56EWZEX.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as h}from"./chunk-JHI3MBHO.js";function H(i,o){i&1&&(a(0,"span",16),g(1,"img",17),c())}function $(i,o){i&1&&(a(0,"span",18),g(1,"img",19),c())}function N(i,o){i&1&&(v(0),g(1,"img",20),P())}function D(i,o){if(i&1){let n=w();v(0,21),a(1,"img",22),_("click",function(t){m(n);let p=s().$implicit,d=s();return z(d.decrease(p,t))}),c(),a(2,"span",23),f(3),c(),a(4,"img",24),_("click",function(t){m(n);let p=s().$implicit,d=s();return z(d.addToCart(p,t))}),c(),P()}if(i&2){let n=s().$implicit,e=s();r(3),C(e.cartCount[n.pizzaId]||0)}}function q(i,o){if(i&1){let n=w();a(0,"div",3),_("click",function(){let t=m(n).$implicit,p=s();return z(p.openPizzaDetails(t.pizzaId))}),a(1,"div",4),g(2,"img",5),u(3,H,2,0,"span",6)(4,$,2,0,"span",7),c(),a(5,"div",8)(6,"strong",9),f(7),c(),a(8,"span",10),f(9),c(),a(10,"div",11)(11,"span",12),f(12),c(),a(13,"button",13),_("click",function(t){let p=m(n).$implicit,d=s();return z(d.handleCartClick(p,t))}),u(14,N,2,0,"ng-container",14)(15,D,5,1,"ng-container",15),c()()()()}if(i&2){let n=o.$implicit,e=s();r(2),l("src","assets/images/"+n.imageFileName,b),r(),l("ngIf",n.isVegetarian),r(),l("ngIf",n.isSpicy),r(3),C(n.name),r(2),C(n.ingredients),r(3),O("",n.price," lei"),r(),l("ngClass",e.cartCount[n.pizzaId]>0?"active":"default"),r(),l("ngIf",(e.cartCount[n.pizzaId]||0)===0),r(),l("ngIf",(e.cartCount[n.pizzaId]||0)>0)}}var tt=(()=>{let o=class o{constructor(){this.pizzas=[],this.cartCount={},this.pizzaService=x(V),this.cartService=x(F),this.navController=x(E)}ngOnInit(){this.pizzaService.getPizzas().subscribe(e=>{this.pizzas=e,e.forEach(t=>{this.cartCount[t.pizzaId]===void 0&&(this.cartCount[t.pizzaId]=0)})}),this.cartService.cartItems$.subscribe(e=>{e.forEach(t=>{this.cartCount[t.pizzaId]=t.quantity||0}),this.pizzas.forEach(t=>{e.find(d=>d.pizzaId===t.pizzaId)||(this.cartCount[t.pizzaId]=0)}),this.cartCount=h({},this.cartCount),console.log("CartCount update:",this.cartCount)})}addToCart(e,t){t?.stopPropagation(),this.cartService.addToCart(h({},e))}decrease(e,t){t?.stopPropagation(),this.cartService.decreaseItem(e.pizzaId)}handleCartClick(e,t){t.stopPropagation(),this.addToCart(e,t)}openPizzaDetails(e){this.navController.navigateForward("/pizza/"+e)}get totalItems(){return Object.values(this.cartCount).reduce((e,t)=>e+t,0)}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=I({type:o,selectors:[["app-home"]],decls:4,vars:2,consts:[[3,"totalItems"],[1,"pizza-list__wrapper"],["class","pizza-list__container",3,"click",4,"ngFor","ngForOf"],[1,"pizza-list__container",3,"click"],[1,"pizza-photo"],["alt","",3,"src"],["class","badge vegetarian",4,"ngIf"],["class","badge spicy",4,"ngIf"],[1,"pizza-info"],[1,"pizza-name"],[1,"pizza-compound"],[1,"pizza__price-btn"],[1,"pizza-price"],[1,"pizza-order",3,"click","ngClass"],[4,"ngIf"],["class","counter-wrapper",4,"ngIf"],[1,"badge","vegetarian"],["src","assets/icon/leaf.svg","alt","Vegetarian"],[1,"badge","spicy"],["src","assets/icon/flame.svg","alt","Spicy"],["src","assets/icon/cart.svg","alt","Add to cart",1,"cart-icon"],[1,"counter-wrapper"],["src","assets/icon/minus.svg","alt","Minus",1,"counter-icon",3,"click"],[1,"counter-number"],["src","assets/icon/plus.svg","alt","Plus",1,"counter-icon",3,"click"]],template:function(t,p){t&1&&(g(0,"app-nav-bar",0),a(1,"ion-content")(2,"div",1),u(3,q,16,9,"div",2),c()()),t&2&&(l("totalItems",p.totalItems),r(3),l("ngForOf",p.pizzas))},dependencies:[T,S,M,y,k,j],styles:["ion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;--background: #F4F4F4}.pizza-list__wrapper[_ngcontent-%COMP%]{padding:0 8px}.pizza-list__container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:12px;border-radius:16px;width:100%;padding:12px;margin:8px 0;background:#fff;box-shadow:0 2px 6px #0000000d}.pizza-photo[_ngcontent-%COMP%]{position:relative;width:50%;background:#f4f4f4;border-radius:16px;display:flex;align-items:center;justify-content:center}.pizza-photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:140px;height:120px;object-fit:cover}.pizza-photo[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{position:absolute;top:0;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 3px #0000004d}.pizza-photo[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px;height:16px}.pizza-photo[_ngcontent-%COMP%]   .vegetarian[_ngcontent-%COMP%]{left:3px;background-color:#4caf50}.pizza-photo[_ngcontent-%COMP%]   .spicy[_ngcontent-%COMP%]{left:3px;background-color:#e00202}.pizza-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:12px;width:50%}.pizza-name[_ngcontent-%COMP%]{font-weight:700;font-size:16px;line-height:24px;letter-spacing:0;color:#0a0a0a}.pizza-compound[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:120%;letter-spacing:0;color:#9fa2a8}.pizza__price-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.pizza-price[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:24px;letter-spacing:0;color:#0a0a0a}.pizza-order[_ngcontent-%COMP%]{border:none;border-radius:33554400px;width:54px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;position:relative}.pizza-order.active[_ngcontent-%COMP%]{background-color:#f4f4f4;gap:4px;width:88px;height:40px}.pizza-order.default[_ngcontent-%COMP%]{background-color:#e00202}.pizza-order[_ngcontent-%COMP%]   .cart-icon[_ngcontent-%COMP%]{width:16px;height:16px}.pizza-order[_ngcontent-%COMP%]   .counter-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;width:100%;color:#0a0a0a}.pizza-order[_ngcontent-%COMP%]   .counter-btn[_ngcontent-%COMP%]{cursor:pointer;font-weight:700;padding:0 4px;-webkit-user-select:none;user-select:none}.pizza-order[_ngcontent-%COMP%]   .counter-number[_ngcontent-%COMP%]{text-align:center;font-weight:700;color:#0a0a0a;min-width:14px}.pizza-order[_ngcontent-%COMP%]   .counter-icon[_ngcontent-%COMP%]{width:16px;height:16px;gap:8px}"]});let i=o;return i})();export{tt as HomePage};
